{% extends 'base.html.twig' %}
{% block title %}Cr√©er un compte{% endblock %}
{% block body %}
{% form_theme form with [_self, 'bootstrap_4_layout.html.twig', '@VichUploader/Form/fields.html.twig'] %}

<div class="wrapper" style="margin-top:2rem;">
    <div class="gg-details" style="max-width:420px; margin:0 auto;">
        <div class="gg-details-content" style="padding:2rem 1.5rem;">

            {# LOGO + TITRE #}
            <div style="text-align:center; margin-bottom:1.5rem;">
                <div style="font-size:2.5rem; margin-bottom:0.5rem;">üåø</div>
                <h1 style="font-size:1.3rem; font-weight:800; color:var(--vertColor); margin-bottom:0.25rem;">
                    Cr√©er un compte
                </h1>
                <p style="font-size:0.78rem; color:#aaa;">
                    C'est facile et rapide
                </p>
            </div>

            {# MESSAGES FLASH #}
            {% for label, messages in app.flashes %}
                {% for message in messages %}
                    <div style="background:#e8f5e9; border-left:3px solid var(--vertColor); padding:0.6rem 0.9rem; border-radius:0 8px 8px 0; font-size:0.85rem; margin-bottom:1rem; color:#333;">
                        {{ message | raw }}
                    </div>
                {% endfor %}
            {% endfor %}

            {# ERREURS CSRF / verify_email #}
            {% for flashError in app.flashes('verify_email_error') %}
                <div style="background:#fce4ec; border-left:3px solid var(--roseDarkColor); padding:0.6rem 0.9rem; border-radius:0 8px 8px 0; font-size:0.85rem; margin-bottom:1rem; color:#333;">
                    {{ flashError }}
                </div>
            {% endfor %}

            {# FORMULAIRE #}
            {{ form_start(form) }}

            <div class="gg-form-group">

                <div>
                    <label class="gg-form-label">Pseudo</label>
                    {{ form_widget(form.nickname, {'attr': {'class': 'gg-form-input', 'placeholder': 'Votre pseudo'}}) }}
                    {{ form_errors(form.nickname) }}
                </div>

                <div>
                    <label class="gg-form-label">Adresse email</label>
                    {{ form_widget(form.email, {'attr': {'class': 'gg-form-input', 'placeholder': 'exemple@email.com'}}) }}
                    {{ form_errors(form.email) }}
                </div>

                <div>
                    <label class="gg-form-label">Mot de passe</label>
                    {{ form_widget(form.newPlainPassword, {'attr': {'class': 'gg-form-input', 'placeholder': '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢'}}) }}
                    {{ form_errors(form.newPlainPassword) }}
                </div>

                <div style="display:flex; align-items:flex-start; gap:0.6rem; font-size:0.82rem; color:#666; margin-top:0.5rem;">
                    {{ form_widget(form.agreeTerms, {'attr': {'style': 'width:16px; height:16px; accent-color:var(--vertColor); cursor:pointer; margin-top:2px; flex-shrink:0;'}}) }}
                    <span>
                        Je reconnais avoir lu et compris les
                        <a href="{{ path('app_cond') }}" target="_blank" style="color:var(--vertColor); font-weight:600;">CGU</a>
                        et je les accepte
                    </span>
                </div>
                {{ form_errors(form.agreeTerms) }}

            </div>

            {{ form_row(form._token) }}

            <button type="submit" class="gg-action-btn btn-plant gg-submit-btn"
                    style="width:100%; justify-content:center; border:none; cursor:pointer; font-size:1rem; font-family:inherit; margin-top:1rem;">
                <span class="btn-icon">‚úÖ</span>
                <span class="btn-label">Cr√©er mon compte</span>
            </button>

            {{ form_end(form, {'render_rest': false}) }}

            <div style="text-align:center; margin-top:1.2rem; font-size:0.82rem;">
                <a href="{{ path('app_login') }}" style="color:#aaa; text-decoration:none;">
                    Vous avez d√©j√† un compte ? <strong style="color:var(--vertColor);">Se connecter</strong>
                </a>
            </div>

        </div>
    </div>
</div>
{% endblock %}
